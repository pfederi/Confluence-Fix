<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Generate Icons - Auto Download</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #0052CC; }
        button { background: #0052CC; color: white; border: none; padding: 12px 24px; font-size: 16px; border-radius: 4px; cursor: pointer; margin: 10px 5px; }
        button:hover { background: #0747A6; }
        .preview { display: flex; gap: 20px; margin: 20px 0; align-items: center; flex-wrap: wrap; }
        .preview-section { margin: 20px 0; }
        .preview-section h3 { margin: 10px 0; color: #333; font-size: 14px; }
        .preview img { border: 1px solid #ddd; padding: 10px; background: white; }
        .status { margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 4px; display: none; }
        .status.show { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ Confluence Cursor Fix - Icon Generator</h1>
        <p>Click the button to automatically download all six icons (blue and gray versions).</p>
        
        <div class="preview-section">
            <h3>Blue Icons (Active on Confluence):</h3>
            <div class="preview" id="previewBlue"></div>
        </div>
        
        <div class="preview-section">
            <h3>Gray Icons (Inactive on other sites):</h3>
            <div class="preview" id="previewGray"></div>
        </div>
        
        <button onclick="generateAndDownload()" id="generateBtn">Generate & Download All Icons</button>
        <button onclick="generateOnly()" id="previewBtn">Preview Only</button>
        
        <div class="status" id="status"></div>
    </div>
    
    <script>
        function createIcon(size, colorScheme) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            
            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, size, size);
            if (colorScheme === 'blue') {
                gradient.addColorStop(0, '#0052CC');
                gradient.addColorStop(1, '#0747A6');
            } else {
                gradient.addColorStop(0, '#999999');
                gradient.addColorStop(1, '#666666');
            }
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);
            
            // Settings
            ctx.strokeStyle = '#FFFFFF';
            ctx.fillStyle = '#FFFFFF';
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            const centerX = size / 2;
            const startY = size * 0.25;
            const endY = size * 0.75;
            const lineWidth = Math.max(2, size / 32);
            const capWidth = size * 0.15;
            
            // Draw cursor line
            ctx.lineWidth = lineWidth;
            ctx.beginPath();
            ctx.moveTo(centerX, startY);
            ctx.lineTo(centerX, endY);
            ctx.stroke();
            
            // Top cap
            ctx.beginPath();
            ctx.moveTo(centerX - capWidth, startY);
            ctx.lineTo(centerX + capWidth, startY);
            ctx.stroke();
            
            // Bottom cap
            ctx.beginPath();
            ctx.moveTo(centerX - capWidth, endY);
            ctx.lineTo(centerX + capWidth, endY);
            ctx.stroke();
            
            // Checkmark
            ctx.lineWidth = Math.max(2, size / 24);
            ctx.beginPath();
            ctx.moveTo(size * 0.6, size * 0.4);
            ctx.lineTo(size * 0.7, size * 0.5);
            ctx.lineTo(size * 0.85, size * 0.3);
            ctx.stroke();
            
            return canvas;
        }
        
        function generateOnly() {
            const previewBlue = document.getElementById('previewBlue');
            const previewGray = document.getElementById('previewGray');
            previewBlue.innerHTML = '';
            previewGray.innerHTML = '';
            
            [16, 48, 128].forEach(size => {
                // Blue version
                const canvasBlue = createIcon(size, 'blue');
                const imgBlue = document.createElement('img');
                imgBlue.src = canvasBlue.toDataURL('image/png');
                imgBlue.style.width = size + 'px';
                imgBlue.style.height = size + 'px';
                imgBlue.title = size + 'x' + size + ' (blue)';
                previewBlue.appendChild(imgBlue);
                
                // Gray version
                const canvasGray = createIcon(size, 'gray');
                const imgGray = document.createElement('img');
                imgGray.src = canvasGray.toDataURL('image/png');
                imgGray.style.width = size + 'px';
                imgGray.style.height = size + 'px';
                imgGray.title = size + 'x' + size + ' (gray)';
                previewGray.appendChild(imgGray);
            });
            
            document.getElementById('status').className = 'status show';
            document.getElementById('status').innerHTML = 'âœ… Preview created! Click "Generate & Download All Icons" to save them.';
        }
        
        function generateAndDownload() {
            const previewBlue = document.getElementById('previewBlue');
            const previewGray = document.getElementById('previewGray');
            previewBlue.innerHTML = '';
            previewGray.innerHTML = '';
            
            const sizes = [16, 48, 128];
            let downloaded = 0;
            const totalIcons = sizes.length * 2; // Blue + Gray
            
            sizes.forEach((size, index) => {
                setTimeout(() => {
                    // Blue version
                    const canvasBlue = createIcon(size, 'blue');
                    const imgBlue = document.createElement('img');
                    imgBlue.src = canvasBlue.toDataURL('image/png');
                    imgBlue.style.width = size + 'px';
                    imgBlue.style.height = size + 'px';
                    imgBlue.title = size + 'x' + size + ' (blue)';
                    previewBlue.appendChild(imgBlue);
                    
                    canvasBlue.toBlob(blob => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `icon${size}.png`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        
                        downloaded++;
                        updateStatus();
                    }, 'image/png');
                    
                    // Gray version
                    setTimeout(() => {
                        const canvasGray = createIcon(size, 'gray');
                        const imgGray = document.createElement('img');
                        imgGray.src = canvasGray.toDataURL('image/png');
                        imgGray.style.width = size + 'px';
                        imgGray.style.height = size + 'px';
                        imgGray.title = size + 'x' + size + ' (gray)';
                        previewGray.appendChild(imgGray);
                        
                        canvasGray.toBlob(blob => {
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = `icon${size}-gray.png`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            
                            downloaded++;
                            updateStatus();
                        }, 'image/png');
                    }, 150);
                    
                }, index * 600);
            });
            
            function updateStatus() {
                const status = document.getElementById('status');
                status.className = 'status show';
                status.innerHTML = `âœ… ${downloaded} of ${totalIcons} icons downloaded...`;
                
                if (downloaded === totalIcons) {
                    status.innerHTML = `âœ… All icons successfully downloaded!<br><br>
                    <strong>Next Step:</strong><br>
                    1. Move the downloaded files to the "icons" folder<br>
                    &nbsp;&nbsp;&nbsp;â€¢ icon16.png, icon48.png, icon128.png (blue)<br>
                    &nbsp;&nbsp;&nbsp;â€¢ icon16-gray.png, icon48-gray.png, icon128-gray.png (gray)<br>
                    2. Reload the extension in your browser`;
                }
            }
        }
        
        // Auto-generate preview on load
        window.addEventListener('load', () => {
            generateOnly();
        });
    </script>
</body>
</html>

